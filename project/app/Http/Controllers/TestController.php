<?php

namespace App\Http\Controllers;

use App\Exceptions\UrlException;
use App\Logic\UrlManager;
use App\Model\AccessUrl;
use App\Service\UserMainService;
use App\User;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Route;
use Illuminate\Http\Request;


class TestController extends Controller
{
    public function __construct()
    {
        define('DOMAIN', "localhost:8000/");
        define("HTTP", "http://");
    }

    public function makeUser()
    {
        for ($i = 60000; $i < 100000; $i++) {
            $tmp = "tset" . $i;
            $num = mt_rand(0, 1);
            User::create([
                'name' => $tmp,
                'email' => $tmp,
                'password' => $tmp,
                'nickname' => $tmp,
                'phone' => $tmp,
                'admin' => $num
            ]);

        }
        return view('error');
    }

    public function updateUserTime()
    {
        $date = [
            '2020-08-07 00:00:00',
            '2020-08-08 00:00:00',
            '2020-08-08 00:00:00',
            '2020-08-04 00:00:00',
            '2020-08-04 00:00:00',
            '2020-08-04 00:00:00',
            '2020-08-04 00:00:00',
            '2020-08-05 00:00:00',
            '2020-08-06 00:00:00',
            '2020-08-07 00:00:00',
            '2020-08-08 00:00:00',
            '2020-08-10 00:00:00',
        ];
        for ($i = 1001; $i < 10000; $i++) {
            $ran = mt_rand(0, 2);
            DB::table('users')->where('id', '=', $i)->update(['created_at' => $date[$ran], 'updated_at' => $date[$ran]]);
        }
    }

    public function makeSampleUrl()
    {
        $service = new UserMainService();

        $url = [
            'http://dudmy.net/javascript/2015/11/02/javascript-replace/',
            'https://www.flaticon.com/free-icon/desk-chair_230295',
            'https://www.youtube.com/?gl=KR&hl=ko',
            'https://boheeee.tistory.com/14',
            'http://blog.naver.com/PostView.nhn?blogId=kks227&logNo=220775134486&parentCategoryNo=&categoryNo=299&viewDate=&isShowPopularPosts=false&from=postList',
            'https://academy.realm.io/kr/posts/constraintlayout-it-can-do-what-now/',
            'https://soon-devblog.tistory.com/9',
            'https://swalloow.github.io/implement-jwt/',
            'https://rongscodinghistory.tistory.com/113',
            'https://github.com/szerhusenBC/jwt-spring-security-demo/blob/master/src/main/java/org/zerhusen/security/jwt/TokenProvider.java',
            'http://wonwoo.ml/index.php/post/1834'
        ];
        for ($i = 10; $i < 2500; $i++) {    //userid
            for ($j = 0; $j <= 10; $j++) {     //url 개수
                try {
                    $service->makeUserUrl([         //중복 url try 주석하고 돌려야함
                        'url' => $url[$j],
                        'userid' => $i,
                        'nameUrl' => ""
                    ]);
                } catch (UrlException $e) {
                    echo $e->getMessage();
                    return;
                }
            }
        }
        /*for($i = 1; $i<2500; $i++){

        }*/
    }

    public function updateUrlTime()
    {
        $date = [
            '2020-08-04 00:00:00',
            '2020-08-04 00:00:00',
            '2020-08-05 00:00:00',
            '2020-08-05 00:00:00',
            '2020-08-05 00:00:00',
            '2020-08-06 00:00:00',
            '2020-08-07 00:00:00',
            '2020-08-07 00:00:00',
            '2020-08-07 00:00:00',
            '2020-08-10 00:00:00',
            '2020-08-10 00:00:00',
            '2020-08-10 00:00:00',
        ];
        $id = [
            10317645839,
            10447637851,
            10976650105,
            11676834873,
            12274162872,
            12582603047,
            12633249919,
            12906496130,
            12999206544,
            13737683390,
            13752683491,
            14359774466,
            14886960676,
            15087648149,
            15726005515,
            18061765583,
            19117648314,
            19926662903,
            20047377897,
            21187303509,
            21203755874,
            21290253198,
            22314201080,
            22780500414,
            23539628047,
            23696992834,
            24460087100,
            26209097899,
            27415500076,
            27686865049,
            27732386500,
            29124002998,
            29977550676,
            30579660238,
            30596784669,
            30698768903,
            31487073204,
            32396072643,
            32961641358,
            33159970607,
            33950567945,
            34390181808,
            34597356737,
            35053861516,
            35133283448,
            35170690545,
            35277290914,
            35292217088,
            35497529432,
            36233031542,
            36543454975,
            37631996567,
            38970639921,
            39122368266,
            39275258544,
            39480901883,
            39611458416,
            40080893026,
            40472204938,
            41306315448,
            41319426952,
            41969524980,
            42394026960,
            42765697589,
            43053379516,
            44373781283,
            44819143224,
            46315605262,
            46444464675,
            46881808911,
            47488358211,
            48791364391,
            49201460008,
            49663038849,
            50245552910,
            51363179578,
            51955784283,
            52407705581,
            52689812912,
            52714905753,
            52781613024,
            53330031090,
            53610460197,
            53999566750,
            54988607059,
            55190558503,
            55433616553,
            55670263084,
            56086467105,
            57204543554,
            57329029198,
            57531092064,
            57821833239,
            57891536130,
            58632605875,
            59272313900,
            59555520064,
            59628681032,
            59639590219,
            60235066510,
            60289647789,
            60359436708,
            60636480146,
            61203076830,
            61840228774,
            62554086152,
            62564208355,
            62849524080,
            63046921960,
            63141809495,
            63426065375,
            64371123687,
            64410051803,
            67961903797,
            68434293034,
            69186124306,
            69498874603,
            69673740567,
            69735766484,
            69740947529,
            70805417882,
            71454347379,
            71881638648,
            73409614974,
            74295561754,
            75052897208,
            75266254559,
            75671942477,
            76280413189,
            76885492743,
            76927225511,
            77171723815,
            77347889513,
            77383877698,
            77399453067,
            80179843439,
            80209860642,
            80412899664,
            81553245281,
            81642253434,
            81846605751,
            81889318196,
            82509447235,
            82790147232,
            84035920807,
            84276861926,
            84702718144,
            84711513240,
            85461766598,
            86555171716,
            87620301511,
            87895864496,
            88168004764,
            88428983016,
            89160118841,
            89212211492,
            90313914822,
            91666701008,
            91764590040,
            92655631842,
            92692837840,
            92695144188,
            92963758851,
            93622887225,
            93681463511,
            93733772922,
            93875333178,
            94136420683,
            94951066393,
            97418892050,
            97511430030,
            97674726300,
            98681003350,
            99060957597,
            99099550990,
            99604701519,
            99858333806,
            100233741437,
            100637014014,
            108106604214,
            115301184817,
            128664015599,
            130429231817,
            151198753906,
            167643351189,
            167740216796,
            185879138759,
            194391812114,
            196985791125,
            197075050171,
            204845675136,
            207130328444,
            217925819355,
            223183218442,
            228328461773,
            233853860952,
            235505480787,
            255468850815,
            259339624573,
            280359011478,
            285382268463,
            294996107989,
            299713970135,
            312179935109,
            317129703051,
            322833715367,
            332104807793,
            339980270034,
            355964361361,
            356720330727,
            367456384503,
            378589780064,
            389976497697,
            403891467025,
            414806368610,
            417190549799,
            431280226838,
            438914826742,
            441833616075,
            449337079126,
            451025365121,
            456862481858,
            457276747154,
            457843582470,
            460851434112,
            462549239460,
            470023140110,
            473756750922,
            490547818290,
            494717094952,
            508726737976,
            514463399716,
            516830874949,
            517478354655,
            522163484354,
            524382395650,
            545809251870,
            547782589538,
            550040002487,
            552965402044,
            553524241200,
            561348065720,
            561507857872,
            571490066988,
            573886300016,
            581107713288,
            593026734801,
            606708055423,
            609748953591,
            615426723060,
            644927072264,
            658292960811,
            659486732175,
            667566277013,
            683681265125,
            688184315721,
            689449086355,
            701713022691,
            707508337207,
            712603566669,
            714620422254,
            715952148460,
            716463930902,
            716750700016,
            720429891096,
            729846306661,
            733184713788,
            738477816964,
            761576863836,
            764644999614,
            768497234047,
            780183447551,
            787255578379,
            787831863788,
            797235249874,
            805857603756,
            813349917443,
            816098253298,
            817639690190,
            820098091734,
            830552904003,
            834270185039,
            834397916056,
            837070627376,
            846385942723,
            861107888168,
            869032780794,
            887170629729,
            893493791710,
            905379692261,
            914979922880,
            918177577505,
            940417747195,
            942386477362,
            954513915570,
            956563551590,
            957075573053,
            964285580925,
            969566680464,
            971545586773,
            971621709988,
            976104950474,
            976346695615,
            977008825365,
            982862429163,
            989936772472,
            991637408212,
            993476849365,
            994556261295,
            997336308544,
            1000982642187,
            1022234892900,
            1026562236032,
            1067135113983,
            1248689057542,
            1328536353349,
            1338837044759,
            1406560910997,
            1429043907527,
            1518573057280,
            1518676441731,
            1549084666767,
            1562746418329,
            1601171255271,
            1632020784850,
            1688932380244,
            1697273650479,
            1701548839375,
            1733045124054,
            1772990706109,
            1798909003949,
            1819889011029,
            1836796598217,
            1881845394258,
            2015993409358,
            2018756803219,
            2142959646049,
            2143580520644,
            2301275878176,
            2347122793097,
            2426924351289,
            2464805401635,
            2495426366169,
            2542219530453,
            2605280545679,
            2710097688534,
            2721530228761,
            2756791288997,
            2876578028890,
            2884297624261,
            2996767504687,
            3083860564987,
            3245106492269,
            3269166530283,
            3297740882055,
            3328779047254,
            3357221428743,
            3526003367092,
            3587847721683,
            3622878408568,
            3706069429079,
            3927691315106,
            3932925622628,
            4000868586791,
            4009902613250,
            4184298474338,
            4187870955227,
            4188052717147,
            4205123744461,
            4294857255791,
            4522490605174,
            4523259895628,
            4532601199583,
            4700887315605,
            4703703726983,
            4709042394408,
            4759148305282,
            4781073348859,
            4829042801566,
            4994402786711,
            5022619999350,
            5026594868437,
            5028802533274,
            5073449570998,
            5096632170099,
            5121153676334,
            5156585200493,
            5321782818861,
            5340772991716,
            5590565742104,
            5599112668910,
            5615302085208,
            5660855970801,
            5699223454824,
            5700990308574,
            5801471878173,
            5812474881871,
            5824437982944,
            5836297423838,
            5924350251586,
            5929548180151,
            6020952220755,
            6052152451711,
            6127516034272,
            6208114750905,
            6307223564753,
            6388183696556,
            6617589941226,
            6650579898894,
            6717442638444,
            6746883975942,
            6870086665443,
            7051813546764,
            7054550321200,
            7075033882783,
            7097188608539,
            7140741748255,
            7140767577066,
            7185266395008,
            7255038940323,
            7281148950594,
            7317222455963,
            7325368458876,
            7362840004047,
            7370363351485,
            7375215469094,
            7380347915317,
            7435759472001,
            7443488986278,
            7662628527282,
            7665662150478,
            7844355611882,
            8087831005356,
            8104967683891,
            8116803748130,
            8131930030289,
            8158175545638,
            8258294374115,
            8285772715568,
            8319681850278,
            8326850785176,
            8340826166745,
            8346398006152,
            8408276429236,
            8472183722217,
            8485019177772,
            8537725346002,
            8584190446662,
            8605275655027,
            8605437648229,
            8626546052011,
            8719285103085,
            8727689323837,
            8745089279292,
            8847353484147,
            8866833429220,
            8883671839207,
            8888043154436,
            8943790379724,
            9278429588845,
            9320935905330,
            9481691959388,
            9524991592012,
            9537660152925,
            9569755616045,
            9574282254820,
            9592552083559,
            9750613780861,
            9778391806595,
            9794681442138,
            9956425386924,
            9957627626213,
            9980941732875,
            9994774448885,
        ];
        for($i = 0; $i<=200; $i++){
            $ran = mt_rand(0, 8);
            DB::table('urls')
                ->where('id',$id[$i])
                ->update([
                    'created_at'=>$date[$ran]
                    ]);
        }
    }

    public function makeAccessUrl()
    {
        $date = [
            '2020-08-08 00:00:00',
            '2020-08-08 00:00:00',
            '2020-08-08 00:00:00',
            '2020-08-09 00:00:00',
            '2020-08-09 00:00:00',
            '2020-08-09 00:00:00',
            '2020-08-10 00:00:00',
            '2020-08-10 00:00:00',
            '2020-08-10 00:00:00',
            '2020-08-10 00:00:00',
            '2020-08-10 00:00:00',
            '2020-08-10 00:00:00',
        ];
        $id = [
            10317645839,
            10447637851,
            10976650105,
            11676834873,
            12274162872,
            12582603047,
            12633249919,
            12906496130,
            12999206544,
            13737683390,
            13752683491,
            14359774466,
            14886960676,
            15087648149,
            15726005515,
            18061765583,
            19117648314,
            19926662903,
            20047377897,
            21187303509,
            21203755874,
            21290253198,
            22314201080,
            22780500414,
            23539628047,
            23696992834,
            24460087100,
            26209097899,
            27415500076,
            27686865049,
            27732386500,
            29124002998,
            29977550676,
            30579660238,
            30596784669,
            30698768903,
            31487073204,
            32396072643,
            32961641358,
            33159970607,
            33950567945,
            34390181808,
            34597356737,
            35053861516,
            35133283448,
            35170690545,
            35277290914,
            35292217088,
            35497529432,
            36233031542,
            36543454975,
            37631996567,
            38970639921,
            39122368266,
            39275258544,
            39480901883,
            39611458416,
            40080893026,
            40472204938,
            41306315448,
            41319426952,
            41969524980,
            42394026960,
            42765697589,
            43053379516,
            44373781283,
            44819143224,
            46315605262,
            46444464675,
            46881808911,
            47488358211,
            48791364391,
            49201460008,
            49663038849,
            50245552910,
            51363179578,
            51955784283,
            52407705581,
            52689812912,
            52714905753,
            52781613024,
            53330031090,
            53610460197,
            53999566750,
            54988607059,
            55190558503,
            55433616553,
            55670263084,
            56086467105,
            57204543554,
            57329029198,
            57531092064,
            57821833239,
            57891536130,
            58632605875,
            59272313900,
            59555520064,
            59628681032,
            59639590219,
            60235066510,
            60289647789,
            60359436708,
            60636480146,
            61203076830,
            61840228774,
            62554086152,
            62564208355,
            62849524080,
            63046921960,
            63141809495,
            63426065375,
            64371123687,
            64410051803,
            67961903797,
            68434293034,
            69186124306,
            69498874603,
            69673740567,
            69735766484,
            69740947529,
            70805417882,
            71454347379,
            71881638648,
            73409614974,
            74295561754,
            75052897208,
            75266254559,
            75671942477,
            76280413189,
            76885492743,
            76927225511,
            77171723815,
            77347889513,
            77383877698,
            77399453067,
            80179843439,
            80209860642,
            80412899664,
            81553245281,
            81642253434,
            81846605751,
            81889318196,
            82509447235,
            82790147232,
            84035920807,
            84276861926,
            84702718144,
            84711513240,
            85461766598,
            86555171716,
            87620301511,
            87895864496,
            88168004764,
            88428983016,
            89160118841,
            89212211492,
            90313914822,
            91666701008,
            91764590040,
            92655631842,
            92692837840,
            92695144188,
            92963758851,
            93622887225,
            93681463511,
            93733772922,
            93875333178,
            94136420683,
            94951066393,
            97418892050,
            97511430030,
            97674726300,
            98681003350,
            99060957597,
            99099550990,
            99604701519,
            99858333806,
            100233741437,
            100637014014,
            108106604214,
            115301184817,
            128664015599,
            130429231817,
            151198753906,
            167643351189,
            167740216796,
            185879138759,
            194391812114,
            196985791125,
            197075050171,
            204845675136,
            207130328444,
            217925819355,
            223183218442,
            228328461773,
            233853860952,
            235505480787,
            255468850815,
            259339624573,
            280359011478,
            285382268463,
            294996107989,
            299713970135,
            312179935109,
            317129703051,
            322833715367,
            332104807793,
            339980270034,
            355964361361,
            356720330727,
            367456384503,
            378589780064,
            389976497697,
            403891467025,
            414806368610,
            417190549799,
            431280226838,
            438914826742,
            441833616075,
            449337079126,
            451025365121,
            456862481858,
            457276747154,
            457843582470,
            460851434112,
            462549239460,
            470023140110,
            473756750922,
            490547818290,
            494717094952,
            508726737976,
            514463399716,
            516830874949,
            517478354655,
            522163484354,
            524382395650,
            545809251870,
            547782589538,
            550040002487,
            552965402044,
            553524241200,
            561348065720,
            561507857872,
            571490066988,
            573886300016,
            581107713288,
            593026734801,
            606708055423,
            609748953591,
            615426723060,
            644927072264,
            658292960811,
            659486732175,
            667566277013,
            683681265125,
            688184315721,
            689449086355,
            701713022691,
            707508337207,
            712603566669,
            714620422254,
            715952148460,
            716463930902,
            716750700016,
            720429891096,
            729846306661,
            733184713788,
            738477816964,
            761576863836,
            764644999614,
            768497234047,
            780183447551,
            787255578379,
            787831863788,
            797235249874,
            805857603756,
            813349917443,
            816098253298,
            817639690190,
            820098091734,
            830552904003,
            834270185039,
            834397916056,
            837070627376,
            846385942723,
            861107888168,
            869032780794,
            887170629729,
            893493791710,
            905379692261,
            914979922880,
            918177577505,
            940417747195,
            942386477362,
            954513915570,
            956563551590,
            957075573053,
            964285580925,
            969566680464,
            971545586773,
            971621709988,
            976104950474,
            976346695615,
            977008825365,
            982862429163,
            989936772472,
            991637408212,
            993476849365,
            994556261295,
            997336308544,
            1000982642187,
            1022234892900,
            1026562236032,
            1067135113983,
            1248689057542,
            1328536353349,
            1338837044759,
            1406560910997,
            1429043907527,
            1518573057280,
            1518676441731,
            1549084666767,
            1562746418329,
            1601171255271,
            1632020784850,
            1688932380244,
            1697273650479,
            1701548839375,
            1733045124054,
            1772990706109,
            1798909003949,
            1819889011029,
            1836796598217,
            1881845394258,
            2015993409358,
            2018756803219,
            2142959646049,
            2143580520644,
            2301275878176,
            2347122793097,
            2426924351289,
            2464805401635,
            2495426366169,
            2542219530453,
            2605280545679,
            2710097688534,
            2721530228761,
            2756791288997,
            2876578028890,
            2884297624261,
            2996767504687,
            3083860564987,
            3245106492269,
            3269166530283,
            3297740882055,
            3328779047254,
            3357221428743,
            3526003367092,
            3587847721683,
            3622878408568,
            3706069429079,
            3927691315106,
            3932925622628,
            4000868586791,
            4009902613250,
            4184298474338,
            4187870955227,
            4188052717147,
            4205123744461,
            4294857255791,
            4522490605174,
            4523259895628,
            4532601199583,
            4700887315605,
            4703703726983,
            4709042394408,
            4759148305282,
            4781073348859,
            4829042801566,
            4994402786711,
            5022619999350,
            5026594868437,
            5028802533274,
            5073449570998,
            5096632170099,
            5121153676334,
            5156585200493,
            5321782818861,
            5340772991716,
            5590565742104,
            5599112668910,
            5615302085208,
            5660855970801,
            5699223454824,
            5700990308574,
            5801471878173,
            5812474881871,
            5824437982944,
            5836297423838,
            5924350251586,
            5929548180151,
            6020952220755,
            6052152451711,
            6127516034272,
            6208114750905,
            6307223564753,
            6388183696556,
            6617589941226,
            6650579898894,
            6717442638444,
            6746883975942,
            6870086665443,
            7051813546764,
            7054550321200,
            7075033882783,
            7097188608539,
            7140741748255,
            7140767577066,
            7185266395008,
            7255038940323,
            7281148950594,
            7317222455963,
            7325368458876,
            7362840004047,
            7370363351485,
            7375215469094,
            7380347915317,
            7435759472001,
            7443488986278,
            7662628527282,
            7665662150478,
            7844355611882,
            8087831005356,
            8104967683891,
            8116803748130,
            8131930030289,
            8158175545638,
            8258294374115,
            8285772715568,
            8319681850278,
            8326850785176,
            8340826166745,
            8346398006152,
            8408276429236,
            8472183722217,
            8485019177772,
            8537725346002,
            8584190446662,
            8605275655027,
            8605437648229,
            8626546052011,
            8719285103085,
            8727689323837,
            8745089279292,
            8847353484147,
            8866833429220,
            8883671839207,
            8888043154436,
            8943790379724,
            9278429588845,
            9320935905330,
            9481691959388,
            9524991592012,
            9537660152925,
            9569755616045,
            9574282254820,
            9592552083559,
            9750613780861,
            9778391806595,
            9794681442138,
            9956425386924,
            9957627626213,
            9980941732875,
            9994774448885,
        ];

        for($i = 0; $i<=474; $i++) {
            $numRan = mt_rand(10, 300);     //횟수
            for($j=0; $j<$numRan; $j++) {
                $dateRan = mt_rand(0, 11);       //날짜
                AccessUrl::create([
                    'url_id' => $id[$i],
                    'access_time' => $date[$dateRan]
                ]);
            }
            DB::table('urls')
                ->where('id', $id[$i])
                ->update([
                    'count' => $numRan
                ]);
        }
    }
}
